extends ../layouts/default

block content
  .row.wrapper.border-bottom.white-bg.page-heading
    .col-md-12
        h2 #{__("Détails d'un utilisateur")}
        ol.breadcrumb
          li
            a(href="/admin/dashboard") #{__('Dashboard')}
          li.active
            strong #{__('Recherche')}
  .row
    .col-lg-12
      .wrapper.wrapper-content.animated.fadeInUp

        .col-md-12
          .ibox.float-e-margins
            .ibox-title
              h4 #{__('Informations principales')}
            .ibox-content
              form.form-horizontal

                .row
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Pseudo')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.username, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__("Email")}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.email, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Email PayPal (développeur)')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.paypalDeveloperEmail, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Email Pusbullet (staff)')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.pushbulletEmail, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Rôle')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.role, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Nom de rôle customisé (staff)')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.customRoleName, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Développeur')}
                      .col-sm-10
                        if userFinded.developer === 'CANDIDATE'
                          span.label.label-warning(style="font-size:13px") #{__('En attente...')}
                        else if userFinded.developer === 'CONFIRMED'
                          span.label.label-primary(style="font-size:13px") #{__('OUI')}
                        else
                          span.label.label-danger(style="font-size:13px") #{__('NON')}
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('IP')}
                      .col-sm-10
                        input.form-control(type='text', value=userFinded.ip, disabled)
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Langue')}
                      .col-sm-10
                        p.form-control-static
                          span.label.label-info(style="font-size:13px;") #{userFinded.lang}
                  .col-md-6
                    .form-group
                      label.col-sm-2.control-label #{__('Double authentification')}
                      .col-sm-10
                        p.form-control-static
                          if userFinded.twoFactorAuthKey
                            span.label.label-primary(style="font-size:13px") #{__('OUI')}
                          else
                            span.label.label-danger(style="font-size:13px") #{__('NON')}



        .col-md-12
          .ibox.float-e-margins
            .ibox-title
              h4 #{__('Paiements PayPal')}
            .ibox-content
              .table-responsive
                table.table.table-hover.no-margins(style="font-size: 13px;")
                  thead
                    tr
                      th #{__("ID de l'achat")}
                      th #{__("ID du paiement")}
                      th #{__('ID de la transaction PayPal')}
                      th #{__("Montant payé par l'utilisateur")}
                      th #{__("Taxes payée par l'utilisateur")}
                      th #{__('Montant reçu')}
                      th #{__("Email PayPal de l'utilisateur")}
                      th #{__("Date du paiement")}
                      th #{__('Statut du paiement')}
                      th #{__('Raison du litige')}
                      th #{__('Date du litige')}
                      th #{__('Date du remboursement')}
                      th #{__('Dernière mise à jour du paiement')}
                  tbody
                    each payment in userFinded.paypalPayments
                      tr
                        td #{payment.purchase}
                        td #{payment.id}
                        td
                          a(href='https://www.paypal.com/fr/cgi-bin/webscr?cmd=_view-a-trans&id='+payment.paymentId, target='_blank') #{payment.paymentId}
                        td.text-info #{payment.paymentAmount} €
                        td.text-danger #{payment.taxAmount} €
                        td.text-success #{payment.paymentAmount - payment.taxAmount} €
                        td #{payment.buyerEmail}
                        td
                          span.fa.fa-calendar
                          | &nbsp;
                          span.moment-date(data-format="Le {L} à {LT}") #{payment.paymentDate}
                        td
                          if payment.state === 'COMPLETED'
                            span.label.label-primary #{__('Complété')}
                          else if payment.state === 'PENDING'
                            span.label.label-warning #{__('En attente')}
                          else if payment.state === 'REVERSED'
                            span.label.label-warning #{__('Suspendu')}
                          else if payment.state === 'REFUNDED'
                            span.label.label-danger #{__('Remboursé')}
                          else if payment.state === 'FAILED'
                            span.label.label-danger #{__('Échoué')}
                        td #{payment.reversedReason}
                        td
                          if payment.caseDate
                            span.fa.fa-calendar
                            | &nbsp;
                            span.moment-date(data-format="Le {L} à {LT}") #{payment.caseDate}
                          else
                            | N/A
                        td
                          if payment.refundDate
                            span.fa.fa-calendar
                            | &nbsp;
                            span.moment-date(data-format="Le {L} à {LT}") #{payment.refundDate}
                          else
                            | N/A
                        td
                          span.fa.fa-calendar
                          | &nbsp;
                          span.moment-date(data-format="Le {L} à {LT}") #{payment.updatedAt}
        .col-md-12
          .ibox.float-e-margins
            .ibox-title
              h4 #{__('Paiements Dédipass')}
            .ibox-content
              .table-responsive
                table.table.table-hover.no-margins(style="font-size: 13px;")
                  thead
                    tr
                      th #{__("ID de l'achat")}
                      th #{__("ID du paiement")}
                      th #{__('Montant reçu')}
                      th #{__("Code utilisé par l'utilisateur")}
                      th #{__("Palier utilisé par l'utilisateur")}
                      th #{__("Date du paiement")}
                      th #{__('Dernière mise à jour du paiement')}
                  tbody
                    each payment in userFinded.dedipassPayments
                      tr
                        td #{payment.purchase}
                        td #{payment.id}
                        td.text-success #{payment.payout} €
                        td #{payment.code}
                        td #{payment.rate}
                        td
                          span.fa.fa-calendar
                          | &nbsp;
                          span.moment-date(data-format="Le {L} à {LT}") #{payment.createdAt}
                        td
                          span.fa.fa-calendar
                          | &nbsp;
                          span.moment-date(data-format="Le {L} à {LT}") #{payment.updatedAt}
        .col-md-12
          .ibox.float-e-margins
            .ibox-title
              h4 #{__('Achats de plugins')}
            .ibox-content
              .table-responsive
                table.table.table-hover.no-margins(style="font-size: 13px;")
                  thead
                    tr
                      th #{__('Moyen de paiement')}
                      th #{__('Nom du plugin')}
                      th #{__("Date de l'achat")}
                      th #{__('Statut')}
                  tbody
                    each purchase, index in userFinded.purchases.plugin
                      tr
                        td
                          if purchase.paymentType === 'PAYPAL'
                            | PayPal
                          else if purchase.paymentType === 'DEDIPASS'
                            | Dédipass
                          else if purchase.paymentType === 'FREE'
                            | #{__('Gratuit')}
                          else
                            | N/A
                        td
                          a(href='/market/plugin/' + purchase.item.slug) #{purchase.item.name}
                        td.moment-date(data-format=__('Le {L} à {LT}')) #{purchase.createdAt}
                        td
                          if purchase.paymentType !== 'PAYPAL' || (purchase.paymentType === 'PAYPAL' && purchase.payment.state === 'COMPLETED')
                            span.label.label-primary #{__('Actif')}
                          else
                            span.label.label-danger #{__('Désactivé')}
        .col-md-12
          .ibox.float-e-margins
            .ibox-title
              h4 #{__('Achats de thèmes')}
            .ibox-content
              .table-responsive
                table.table.table-hover.no-margins(style="font-size: 13px;")
                  thead
                    tr
                      th #{__('Moyen de paiement')}
                      th #{__('Nom du thème')}
                      th #{__("Date de l'achat")}
                      th #{__('Statut')}
                  tbody
                    each purchase, index in userFinded.purchases.theme
                      tr
                        td
                          if purchase.paymentType === 'PAYPAL'
                            | PayPal
                          else if purchase.paymentType === 'DEDIPASS'
                            | Dédipass
                          else if purchase.paymentType === 'FREE'
                            | #{__('Gratuit')}
                          else
                            | N/A
                        td
                          a(href='/market/theme/' + purchase.item.slug) #{purchase.item.name}
                        td.moment-date(data-format=__('Le {L} à {LT}')) #{purchase.createdAt}
                        td
                          if purchase.paymentType !== 'PAYPAL' || (purchase.paymentType === 'PAYPAL' && purchase.payment.state === 'COMPLETED')
                            span.label.label-primary #{__('Actif')}
                          else
                            span.label.label-danger #{__('Désactivé')}


  div.clearfix
  br
  br
